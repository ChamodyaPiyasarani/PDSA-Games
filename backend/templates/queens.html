{% extends "base.html" %}

{% block title %}Eight Queens Puzzle{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/queens.css') }}">
{% endblock %}

{% block content %}
<div class="queens-container">
    <h1>Eight Queens Puzzle</h1>
    
    <div class="game-controls">
        <div class="player-info">
            <label for="player-name">Your Name:</label>
            <input type="text" id="player-name" placeholder="Enter your name" required>
        </div>
        
        <button id="start-game" class="btn btn-primary">Start New Game</button>
        <button id="find-solutions" class="btn btn-secondary">Find All Solutions</button>
    </div>
    
    <div class="game-area">
        <div class="chessboard" id="chessboard">
            <!-- 8x8 chessboard will be generated by JavaScript -->
        </div>
        
        <div class="game-info">
            <div class="status" id="game-status">Place 8 queens on the board so that no two threaten each other</div>
            <div class="queens-placed">
                Queens placed: <span id="queens-count">0</span>/8
            </div>
            <div class="solutions-info">
                <h3>Solutions Found</h3>
                <div class="solutions-count">
                    <span class="algorithm-name">Sequential:</span>
                    <span class="solution-count" id="sequential-solutions">0</span>
                </div>
                <div class="solutions-count">
                    <span class="algorithm-name">Threaded:</span>
                    <span class="solution-count" id="threaded-solutions">0</span>
                </div>
                <div class="solutions-time">
                    <span class="algorithm-name">Sequential Time:</span>
                    <span class="time" id="sequential-time">-</span>
                </div>
                <div class="solutions-time">
                    <span class="algorithm-name">Threaded Time:</span>
                    <span class="time" id="threaded-time">-</span>
                </div>
            </div>
            <button id="submit-solution" class="btn btn-primary" disabled>Submit Solution</button>
        </div>
    </div>
    
    <div class="solutions-history">
        <h2>Found Solutions</h2>
        <div class="solutions-list" id="solutions-list"></div>
    </div>
    
    <div class="game-history">
        <h2>Recent Games</h2>
        <div class="history-list" id="history-list"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/queens.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const playerNameInput = document.getElementById('player-name');
        validation.setupValidation(playerNameInput, validation.validatePlayerName);
        
        // Update the start game button click handler
        document.getElementById('start-game').addEventListener('click', () => {
            const result = validation.validatePlayerName(playerNameInput.value);
            if (!result.isValid) {
                validation.showValidationMessage(playerNameInput, result.message, false);
                return;
            }
            initializeGame();
        });
    });
</script>
{% endblock %}